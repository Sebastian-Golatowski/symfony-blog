<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Generic Blog Name</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
        
        {% block bootsrtap %}
            {# <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"> #}
        {% endblock %}
        {% block stylesheets %}
            {{ encore_entry_link_tags('app') }}
        {% endblock %}

        

        {% block javascripts %}
            {{ encore_entry_script_tags('app') }}
        {% endblock %}
    </head>
    <body>
        <script>
            const reportPost = (postId, userId)=>{
                fetch('http://127.0.0.1:8000/blog/report', {
                method: 'POST',
                body: JSON.stringify({post: postId, user: userId})
                }).then(response => {
                if(response.status ==200){
                    return alert("ok")
                }
                else if(response.status==201){
                    return alert("already reported")
                }
                else{
                    return alert("something went wrong, please try again later")
                }
                })
            }

            const deleteAccount = (userId)=>{
                fetch('http://127.0.0.1:8000/admin/deleteAccount', {
                method: 'POST',
                body: JSON.stringify({user: userId})
                }).then(response => {
                if(response.text =="user deleted"){
                    return alert("ok")
                }
                else{
                    return alert("something went wrong, please try again later")
                }
                })
            }

            const changeStatus = (userId, toWhat) => {
                fetch('http://127.0.0.1:8000/admin/changeStatus', {
                    method: 'POST',
                    body: JSON.stringify({user: userId, towhat: toWhat})
                })
                .then(response => {
                    if (response.status == 200) {
                        return alert("ok, ur actions will be wisible for u after reolading");
                    } else {
                        return alert("something went wrong, please try again later");
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    return alert("an error occurred, please try again later");
                });
            }
                
        </script>
        <header >
            <a class="text-decoration-none text-white" href="/blog"><h1>Generic Blog Name</h1></a>
            <nav>
                {% if app.user %}
                    <a class="text-decoration-none text-white"  href="/blog/create">Create</a>
                    <a class="text-decoration-none text-white"  href="/logout">logout</a>
                    <a class="text-decoration-none text-white"  href="/#">My ({{app.user.username}}) account</a>
                {% else %}                
                    <a class="text-decoration-none text-white"  href="/login">login</a>
                    <a class="text-decoration-none text-white"  href="/register">register</a>
                {% endif %}
            </nav>
        </header>
        {% block body %}{% endblock %}
        <footer>
            Site made by me
        </footer>
    </body>
</html>
